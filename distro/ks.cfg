#Generated by Kickstart Configurator
#platform=x86

#System language
lang es_MX
#Language modules to install
langsupport en_US --default=es_MX
#System keyboard
keyboard latam
#System mouse
mouse
#System timezone
timezone America/Mexico_City
#Root password
rootpw --disabled
#Initial user
user doc --fullname "Doc" --iscrypted --password $1$Vd5fZFw3$Q41cWHytjbp5b2Z3ezBsV/
#Reboot after installation
reboot
#Use text mode install
text
#Install OS instead of upgrade
install
#Use CDROM installation media
cdrom
#System bootloader configuration
bootloader --location=mbr 
#Clear the Master Boot Record
zerombr yes
#Partition clearing information
clearpart --all --initlabel 
#Disk partitioning information
part /boot --fstype ext4 --size 512 
part / --fstype ext4 --size 1 --grow 
#System authorization infomation
auth  --useshadow  --enablemd5 
#Network information
network --bootproto=dhcp --device=eth0
#Firewall configuration
firewall --disabled 
#Do not configure the X Window System
skipx

# Packages
%packages
ca-certificates
openssl

chromium-browser
curl
git
python
screen
ubuntu-mate-desktop
vim
wget

%post
### Install Puppet
wget https://apt.puppetlabs.com/puppetlabs-release-pc1-xenial.deb
dpkg -i puppetlabs-release-pc1-xenial.deb
apt-get update -y
rm puppetlabs-release-pc1-xenial.deb
apt-get install puppet-agent -y

### set puppet config
echo '[main]' >/etc/puppet/puppet.conf
echo 'logdir=/var/log/puppet' >>/etc/puppet/puppet.conf
echo 'vardir=/var/lib/puppet' >>/etc/puppet/puppet.conf
echo 'ssldir=/var/lib/puppet/ssl' >>/etc/puppet/puppet.conf
echo 'rundir=/var/run/puppet' >>/etc/puppet/puppet.conf
echo 'factpath=$confdir/facter' >>/etc/puppet/puppet.conf

### Updates
apt-get update
apt-get -y upgrade
apt-get -y dist-upgrade

